# python_exam_telebot

## Описание

Учебный проект. Финальная работа по итогу курса.

Тема проекта: Telegram-бот для поиска физических упражнений по целевым мышечным группам, а также по подстроке в 
названии упражнения. Сервис, на основании данных которого это всё будет строиться - 
https://rapidapi.com/mortimerbrian135/api/exerciseapi3/

## Установка

После клонирования репозитория:

```commandline
pip install -r requirements.txt
```


```commandline
python main.py --help
```

## Постановка задачи

Есть особенность - кроме непосредственно реализации проекта на момент написания данных строк 
в рамках данной работы предполагается что исполнитель самостоятельно придумает себе задание и согласовывает 
его с куратором. Коротко в общем виде постановка звучит так:
- Есть ресурс - https://rapidapi.com . На этом ресурсе нужно выбрать API который попадает под критерии.
- Критерии:
  - В API должно быть несколько эндпойнтов;
  - Должен присутствовать сценарий где мы должны получить данные сначала из одного, потом передать их в другой.
- Кроме выбора API исполнитель также должен придумать и согласовать логику работы бота. 

Поиск упражнений
Описание
Telegram-бот для поиска физических упражнений по целевым мышечным группам, а также по подстроке в названии упражнения.

Функциональные требования
Бот предоставляет возможность произвести поиск упражнений по названию основной целевой мышечной группы.
Бот предоставляет возможность произвести поиск упражнений по названию вспомогательной мышечной группы.
Бот предоставляет возможность произвести поиск упражнений по указанной подстроке в названии упражнения.
Указание целевых мышечных групп (как основной так и второстепенной) происходит через выбор пользователем значения из известного списка.
Бот предоставляет возможность выбрать язык взаимодействия (en/ru). По умолчанию ru.
Результатом поиска должен являться перечень упражнений, каждое их которых представлено в виде следующей информации:
Название;
Название группы, в которую входит упражнение (жим, тяга и т.д);
Задействованные основные группы мышц;
Задействованные дополнительные группы мышц;
Тип тренинга по цели (силовой, выносливость и т.д);
Тип тренинга по включению мышечных групп (изолированный, составной);
Ссылка на Youtube.
Бот предоставляет возможность указать кол-во упражнений в результирующей выдаче (выводится не более указанного кол-ва)
Бот предоставляет возможность посмотреть историю своих запросов (вызовов команд).
Доступные команды
/start - команда с которой начинается запуск бота для нового пользователя (будет выводить справку);
/help - справка по возможным командам;
/lang - выбор языка на котором будут представлены результаты (en/ru). По умолчанию ru;
/primary — поиск упражнений по основной мышечной группе;
/secondary — поиск упражнений по дополнительной мышечной группе;
/substr — поиск упражнений по подстроке в названии упражнения;
/history - история запросов;
Сценарии использования
1. Получение списка упражнений на основе указанной основной мышечной группы.
Основной поток
1.1. Пользователь вводит команду /primary
1.2. Бот запрашивает у стороннего сервиса список возможных мышечных групп.
1.3. Сторонний сервис возвращает список возможных мышечных групп.
1.4. Бот производит перевод списка на текущий целевой язык.
1.5. Бот отвечает пользователю списком мышечных групп, предлагая выбрать целевую.    
1.6. Пользователь выбирает из предложенного списка мышечную группу.  
1.7. Бот запрашивает у пользователя максимальное кол-во элементов выдачи.
1.8. Пользователь вводит целое число.
1.9. Бот запрашивает у стороннего сервиса список упражнений согласно выбранной целевой мышечной группы.
1.10. Бот отвечает пользователю списком упражнений (согласно функциональному требованию 6).
Альтернативный поток
1.8а. Пользователь вводит любое значение кроме целого числа.

1.8а.1. Бот отвечает ошибкой, указывая что доступны только целые числа.
1.8а.2. Переход на шаг 1.7
2. Получение списка упражнений на основе указанной основной мышечной группы.
Аналогично сценарию 1, но пользователь теперь выбирает целевую второстепенную мышечную группу (команда /secondary).

3. Выбор языка взаимодействия
Основной поток
3.1. Пользователь вводит команду /lang.
3.2. Бот предлагает выбрать язык из списка (en/ru).
3.3. Пользователь выбирает язык.
3.4. Бот подтверждает выбор на указанном языке и предлагает начать поиск.
4. Получение списка упражнений на основе подстроки входящей в название упражнения.
Основной поток
4.1. Пользователь вводит команду /substr.
4.2. Бот предлагает пользователю ввести название или часть названия упражнения на текущем языке.
4.3. Пользователь передаёт строку.
4.4. Бот производит поиск в языковом файле текущего языка вхождение подстроки в название упражнения.
4.5. Бот формирует список из 1+ названий упражнений куда входит подстрока.
4.6. Бот согласно сформированному списку запрашивает у стороннего сервиса по названию упражнений данные по ним.
4.7. Бот запрашивает у пользователя максимальное кол-во элементов выдачи.
4.8. Пользователь вводит целое число.
4.9. Бот отвечает пользователю списком упражнений (согласно функциональному требованию 6).
4.10. Бот предлагает пользователю ввести команду для нового поиска.
Альтернативные потоки
4.5а. Бот не находит совпадений в языковом файле.

4.5а.1. Бот отвечает пользователю что упражнений по запросу не найдено.
4.5а.2. Переход на шаг 4.10.
4.8а. Пользователь вводит любое значение кроме целого числа.

4.8а.1. Бот отвечает ошибкой, указывая что доступны только целые числа.
4.8а.2. Переход на шаг 4.7
Некоторые детали реализации (как видится в первом приближении)
Когда речь идёт овыборе из списка, то пользователю предлагаются кнопки.
Переводы всего на другие языки хранятся в языковых файлах-json (1 файл = 1 язык) с определённой структурой.
Для команды поиска по подстроке будет реализовано неявное дублирование данных сервиса (т.к нужно хранить названия всех упражнений).
В самом сервисе не реализовано такого поиска (упражнения возвращаются только по точному совпадению названия).
Соответственно придётся скриптом сграбить все данные оттуда чтобы сделать переводы. 
В ученических целях предлагается не заставлять меня переводить все упражнения, а ограничится несколькими чтобы продемонстрировать работоспособность поиска. 
Т.к поиск по подстроке изначально делается на стороне данных бота, то качество поиска напрямую зависит от кол-ва переведённых упражнений на целевой язык (нет перевода - нет результата).
В случае если перевода для какого-то элемента поисковой выдачи не найдено в языковом файле - он будет возвращаться на оригинальном для сервиса языке (en).
История запросов будет выводится как история вызовов основных комманд с временными метками.
Какие действия в рамках этих команд производились в истории сохраняться не будут. Для хранения истории будет использоваться сохранение в файл-JSON.
Языковые настройки являются индивидуальными и хранятся на протяжении работы бота в памяти (не сохраняются перманентно).
